{% extends 'student_layout.html.twig' %}

{% block title %}Mes Examens{% endblock %}

{% block body %}

<h2>Mes Examens</h2>

{% for exam in exams %}

    {% set submission = null %}
    {% for s in submissions %}
        {% if s.exam.id == exam.id %}
            {% set submission = s %}
        {% endif %}
    {% endfor %}

    <div style="border:1px solid #ddd;padding:20px;margin-bottom:20px;border-radius:10px;">

        <h3>{{ exam.title }}</h3>
        <p>{{ exam.description }}</p>

        {% if submission %}
            
            {% if submission.isPassed %}
                <p style="color:green;font-weight:bold;">✔ Réussi</p>
            {% else %}
                <p style="color:red;font-weight:bold;">❌ Échoué</p>
            {% endif %}

            <p>Note : {{ submission.grade ?? 'En attente' }}</p>

        {% else %}

            <a href="{{ path('student_exam_show',{id:exam.id}) }}">
                Commencer l'examen
            </a>

        {% endif %}

    </div>

{% endfor %}

{% endblock %}
