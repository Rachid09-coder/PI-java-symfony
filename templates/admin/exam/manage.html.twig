{% extends 'admin_layout.html.twig' %}

{% block stylesheets %}
<link rel="stylesheet" href="/css/exam-list.css">
{% endblock %}

{% block body %}

<div class="exam-header">

    <h2>Gestion des Examens</h2>

    <div style="display:flex; gap:12px;">

        {# ===== BUTTON TEACHER CORRECTIONS ===== #}
        <a href="{{ path('teacher_corrections') }}"
           class="create-btn"
           style="background:#10b981;">
            üìë Corrections
        </a>

        {# ===== CREATE EXAM ===== #}
        <a href="{{ path('admin_exam_new') }}"
           class="create-btn">
            + Cr√©er un Examen
        </a>

    </div>

</div>


<div class="exam-card">

    {# Flash messages #}
    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div class="flash flash-{{ label }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endfor %}

<table class="exam-table">

<thead>
<tr>
    <th>Titre</th>
    <th>Type</th>
    <th>Dur√©e</th>
    <th>Actions</th>
</tr>
</thead>

<tbody>

{% for exam in exams %}
<tr>

<td>
    <strong>{{ exam.title }}</strong>
</td>

<td>
{% if exam.type == 'pdf' %}
    <span class="badge badge-pdf">üìÑ PDF</span>
{% elseif exam.type == 'link' %}
    <span class="badge badge-link">üîó Lien Quiz</span>
{% elseif exam.type == 'word' %}
    <span class="badge badge-word">üìù Word</span>
{% endif %}
</td>

<td class="duration">
    {{ exam.duration ? exam.duration ~ ' min' : '‚Äî' }}
</td>

<td>
    <div class="actions">

        {# VIEW EXAM AS STUDENT #}
        <a href="{{ path('student_exam_show',{id:exam.id}) }}"
           class="action-btn view-btn">
            Voir
        </a>

        {# EDIT #}
        <a href="{{ path('admin_exam_edit',{id:exam.id}) }}"
           class="action-btn edit-btn">
            Modifier
        </a>

        {# DELETE #}
        <a href="{{ path('admin_exam_delete',{id:exam.id}) }}"
           class="action-btn delete-btn"
           onclick="return confirm('Supprimer cet examen ?');">
            Supprimer
        </a>

    </div>
</td>

</tr>

{% else %}
<tr>
<td colspan="4" class="empty">
    Aucun examen cr√©√© pour le moment üìö
</td>
</tr>
{% endfor %}

</tbody>
</table>

</div>

{% endblock %}
