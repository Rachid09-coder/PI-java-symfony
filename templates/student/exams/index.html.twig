{% extends 'student_layout.html.twig' %}

{% block title %}Mes Examens{% endblock %}

{% block body %}

<h2>Mes Examens</h2>
<div style="margin-bottom:20px;">
    <a href="{{ path('student_results') }}" class="btn btn-success"
       style="padding:10px 18px; border-radius:8px; background:#2ecc71; color:white; text-decoration:none; font-weight:bold;">
        üìä Voir mes notes
    </a>
</div>

{% for exam in exams %}

    {% set submission = submissionMap[exam.id] ?? null %}

    <div style="border:1px solid #ddd;padding:20px;margin-bottom:20px;border-radius:10px;">

        <h3>{{ exam.title }}</h3>
        <p>{{ exam.description }}</p>

        {# 1Ô∏è‚É£ Student never passed the exam #}
        {% if submission is null %}

            <a href="{{ path('student_exam_show',{id:exam.id}) }}"
               style="background:#3B49A2;color:white;padding:10px 18px;border-radius:8px;text-decoration:none;">
                Commencer l'examen
            </a>

        {% else %}

            {# 2Ô∏è‚É£ Submitted but not corrected yet #}
            {% if submission.grade is null %}
                <p style="color:orange;font-weight:bold;">
                    ‚è≥ Copie envoy√©e ‚Äî En attente de correction
                </p>

            {# 3Ô∏è‚É£ Corrected #}
            {% else %}

                {% if submission.isPassed %}
                    <p style="color:green;font-weight:bold;">‚úî R√©ussi</p>
                {% else %}
                    <p style="color:red;font-weight:bold;">‚ùå √âchou√©</p>
                {% endif %}

                <p style="font-size:18px;">
                    <b>Note :</b> {{ submission.grade }}/20
                </p>

            {% endif %}

        {% endif %}

    </div>

{% else %}
    <p>Aucun examen disponible.</p>
{% endfor %}

{% endblock %}
