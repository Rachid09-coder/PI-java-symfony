{% extends 'base.html.twig' %}

{% block title %}Réinitialiser votre mot de passe - EduSmart{% endblock %}

{% block body %}
<div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px;">
    <div style="background: white; width: 100%; max-width: 500px; border-radius: 30px; padding: 50px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); position: relative; overflow: hidden;">
        
        <div style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 40px;">
            <div style="width: 45px; height: 45px; background: #3B49A2; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 800; font-size: 1.2rem;">E</div>
            <span style="font-weight: 800; font-size: 1.5rem; color: #1E293B; letter-spacing: -0.5px;">EduSmart</span>
        </div>

        <div style="text-align: center; margin-bottom: 35px;">
            <h2 style="font-size: 1.8rem; font-weight: 800; color: #1E293B; margin-bottom: 8px;">Créer un nouveau mot de passe</h2>
            <p style="color: #64748B;">Entrez votre nouveau mot de passe ci-dessous.</p>
        </div>

        {% for message in app.flashes('error') %}
            <div style="background: #FFF1F2; color: #E11D48; padding: 12px; border-radius: 12px; margin-bottom: 20px; font-size: 0.9rem; text-align: center; border: 1px solid #FECACA;">
                {{ message }}
            </div>
        {% endfor %}

        {{ form_start(form, {'attr': {'novalidate': true}}) }}

            <div style="margin-bottom: 30px;">
                <label style="display: block; font-size: 0.9rem; font-weight: 600; margin-bottom: 8px; color: #1E293B;">Nouveau mot de passe</label>
                {{ form_widget(form.password.first, {
                    'attr': {
                        'placeholder': 'Entrez votre nouveau mot de passe',
                        'style': 'width: 100%; padding: 14px 18px; border: 1px solid #E2E8F0; border-radius: 12px; background: #F8FAFC; outline: none; transition: 0.3s;'
                    }
                }) }}
                {{ form_errors(form.password.first) }}
                <small style="display: block; margin-top: 8px; color: #64748B; font-size: 0.8rem;">
                    • Au moins 8 caractères<br>
                    • Au moins une majuscule et une minuscule<br>
                    • Au moins un chiffre
                </small>
            </div>

            <div style="margin-bottom: 30px;">
                <label style="display: block; font-size: 0.9rem; font-weight: 600; margin-bottom: 8px; color: #1E293B;">Confirmer le mot de passe</label>
                {{ form_widget(form.password.second, {
                    'attr': {
                        'placeholder': 'Confirmez votre nouveau mot de passe',
                        'style': 'width: 100%; padding: 14px 18px; border: 1px solid #E2E8F0; border-radius: 12px; background: #F8FAFC; outline: none; transition: 0.3s;'
                    }
                }) }}
                {{ form_errors(form.password.second) }}
            </div>

            <button type="submit" style="width: 100%; padding: 16px; font-weight: 700; background: #3B49A2; border-radius: 12px; border: none; color: white; cursor: pointer; font-size: 1rem; margin-bottom: 25px; box-shadow: 0 4px 6px -1px rgba(59, 73, 162, 0.2);">
                Réinitialiser le mot de passe
            </button>

        {{ form_end(form) }}

        <div style="text-align: center;">
            <p style="color: #64748B; font-size: 0.9rem;"><a href="{{ path('app_login') }}" style="color: #3B49A2; font-weight: 700; text-decoration: none;">Retour à la connexion</a></p>
        </div>

        <div style="position: absolute; top: -50px; right: -50px; width: 150px; height: 150px; background: #EEF2FF; border-radius: 50%; z-index: -1;"></div>
    </div>
</div>
{% endblock %}
